# BingeTV .htaccess Configuration
# Routes clean URLs while preserving portal-specific assets

RewriteEngine On

# Redirect www to non-www  
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# Root directory - serve public/index.php
RewriteRule ^$ public/index.php [L]
RewriteRule ^index\.php$ public/index.php [L]

# Allow direct access to portals and their assets
# /user/, /admin/, /api/, /public/ should work as-is
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Route clean URLs to public directory
# /register.php -> /public/register.php
RewriteRule ^([^/]+\.php)$ public/$1 [L]
RewriteRule ^(css|js|images|gateway)/(.*)$ public/$1/$2 [L]

# Prevent directory listing
Options -Indexes

# Security
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
</IfModule>
